
# 19 – Persistencia y Artefactos  
**Muestra:** Lab_03-2.malware  
**Curso/Lab:** RPISEC – Investigating Malware – Lab 3.2

---

## 1. Introducción

Este documento describe los **mecanismos de persistencia** implementados por la muestra Lab 3.2, así como los **artefactos** que el malware deja en el sistema comprometido como consecuencia de su instalación y ejecución.

El análisis se basa principalmente en el estudio de la función `FUN_004012A0`, responsable de crear entradas de **inicio automático en el registro de Windows**, y en la observación dinámica del comportamiento asociado.

---

## 2. Visión general de la persistencia

El malware implementa una técnica de persistencia **clásica y fiable**, consistente en:

- Crear o actualizar una entrada en la clave:
```SOFTWARE\Microsoft\Windows\CurrentVersion\Run```

- Asociar dicha entrada a un binario controlado por el atacante
- Garantizar la ejecución automática del malware en cada inicio de sesión

No se observan técnicas avanzadas (servicios, drivers, tareas programadas), lo que refuerza el carácter **didáctico pero realista** de la muestra.

---

## 3. Función responsable de la persistencia

- **Función:** `FUN_004012A0`
- **Prototipo lógico:**
```c
int persistencia(char *nombre_valor, char *ruta_binario);




## 15. Función que controla la persistencia en crudo:
- [FUN_004012a0-persistencia](../decompilado/FUN_004012a0-persistencia.md)
