## Herramientas a instalar antes de ejecutar el malware

### üîí Entorno de an√°lisis
Primero, crea un entorno aislado y seguro:

VirtualBox o VMware: Para crear m√°quinas virtuales seguras.

Snapshot de la VM: Crea una instant√°nea antes de ejecutar nada, para poder restaurar.

Apaga la red si es necesario: O usa una red simulada (como INetSim).

### üß† An√°lisis de Memoria RAM
Instala antes de ejecutar el malware:

DumpIt o WinPMEM: Para volcar la memoria RAM.

Volatility 3: Framework para analizar los volcados de memoria.

Rekall (alternativa a Volatility).

### üóÉÔ∏è An√°lisis Est√°tico (sin ejecutar el malware)
PEStudio: Para analizar binarios PE sin ejecutarlos.

BinText: Para extraer texto.

CFF Explorer: Para examinar cabeceras PE.

Die (Detect It Easy): Para detectar packers y compiladores.

### üîç An√°lisis Din√°mico (ejecutando el malware)
Estas deben estar listas antes de la ejecuci√≥n:

Process Monitor (ProcMon): Para registrar llamadas a archivo, registro, red, etc.

Process Explorer: Para visualizar procesos activos y DLLs.

Autoruns: Para detectar persistencia.

Regshot: Para comparar el registro antes y despu√©s.

Wireshark: Para analizar tr√°fico de red.

TCPView: Para conexiones activas.

### üß¨ Desensamblado / Depuraci√≥n
x64dbg: Depurador de 32/64 bits.

IDA Free o Ghidra: Para an√°lisis de binarios.

OllyDbg (solo 32 bits, m√°s antigua, pero a√∫n √∫til).

### üì¶ Otros √∫tiles
ApateDNS: Para simular resoluci√≥n de DNS.

INetSim: Para simular servicios de Internet.

FakeNet-NG: Simula tr√°fico de red para analizar comportamiento del malware.


## Script para un vm de Windows 10
Script PowerShell para ejecutar en una VM de Windows 10 limpia para instalar las herramientas esenciales de an√°lisis de malware. Este script instala lo b√°sico para an√°lisis din√°mico, an√°lisis de memoria, y an√°lisis est√°tico. Lo he dividido en bloques para que puedas adaptar seg√∫n tus necesidades.

### ‚ö†Ô∏è Antes de ejecutar:
Ejecuta PowerShell como administrador. Si el sistema bloquea scripts, podemos habilitar su ejecuci√≥n temporal con:
```
Set-ExecutionPolicy Bypass -Scope Process
```

###üìú SCRIPT: setup-malware-lab.ps1
```
# Crear carpeta base
$toolsDir = "C:\MalwareTools"
New-Item -ItemType Directory -Path $toolsDir -Force

# Funci√≥n para descargar e instalar ZIPs
function Install-ZipTool {
    param (
        [string]$url,
        [string]$destination
    )
    $zipPath = "$env:TEMP\temp.zip"
    Invoke-WebRequest -Uri $url -OutFile $zipPath
    Expand-Archive -Path $zipPath -DestinationPath $destination -Force
    Remove-Item $zipPath
}

# Instalar Sysinternals Suite
Write-Host "Instalando Sysinternals Suite..."
Install-ZipTool -url "https://download.sysinternals.com/files/SysinternalsSuite.zip" -destination "$toolsDir\Sysinternals"

# Instalar PEStudio
Write-Host "Descargando PEStudio..."
Install-ZipTool -url "https://www.winitor.com/tools/pestudio.zip" -destination "$toolsDir\PEStudio"

# Instalar Detect It Easy
Write-Host "Descargando Detect It Easy..."
Install-ZipTool -url "https://github.com/horsicq/Detect-It-Easy/releases/latest/download/die_win64_portable.zip" -destination "$toolsDir\DIE"

# Instalar x64dbg
Write-Host "Descargando x64dbg..."
Install-ZipTool -url "https://github.com/x64dbg/x64dbg/releases/latest/download/snapshot_2024-04-15_00-00.zip" -destination "$toolsDir\x64dbg"

# Instalar Volatility 3 (solo descarga, requiere Python)
Write-Host "Descargando Volatility 3..."
git clone https://github.com/volatilityfoundation/volatility3 "$toolsDir\Volatility3"

# Instalar Wireshark (requiere interacci√≥n, pero se lanza el instalador)
Write-Host "Descargando Wireshark..."
$wiresharkInstaller = "$env:TEMP\Wireshark.exe"
Invoke-WebRequest -Uri "https://www.wireshark.org/download/win64/" -OutFile $wiresharkInstaller
Start-Process $wiresharkInstaller

# Crear accesos directos en escritorio
Write-Host "Creando accesos directos..."
$desktop = [Environment]::GetFolderPath("Desktop")
$tools = Get-ChildItem -Path $toolsDir -Recurse -Include *.exe | Where-Object { $_.FullName -notlike "*x64dbg\release*" } # evita duplicados

foreach ($tool in $tools) {
    $link = "$desktop\$($tool.BaseName).lnk"
    $wshell = New-Object -ComObject WScript.Shell
    $shortcut = $wshell.CreateShortcut($link)
    $shortcut.TargetPath = $tool.FullName
    $shortcut.Save()
}

Write-Host "Instalaci√≥n completada. Herramientas disponibles en: $toolsDir"
```
# Crear carpeta base
$toolsDir = "C:\MalwareTools"
New-Item -ItemType Directory -Path $toolsDir -Force

function Install-ZipTool {
    param (
        [string]$url,
        [string]$destination
    )
    $zipPath = "$env:TEMP\temp.zip"
    Invoke-WebRequest -Uri $url -OutFile $zipPath
    Expand-Archive -Path $zipPath -DestinationPath $destination -Force
    Remove-Item $zipPath
}

function Download-Installer {
    param (
        [string]$url,
        [string]$filename
    )
    $path = "$env:TEMP\$filename"
    Invoke-WebRequest -Uri $url -OutFile $path
    Start-Process $path
}

Write-Host "`n=========== Instalando herramientas ===========`n"

# Sysinternals Suite
Write-Host "‚Üí Sysinternals Suite..."
Install-ZipTool -url "https://download.sysinternals.com/files/SysinternalsSuite.zip" -destination "$toolsDir\Sysinternals"

# PEStudio
Write-Host "‚Üí PEStudio..."
Install-ZipTool -url "https://www.winitor.com/tools/pestudio.zip" -destination "$toolsDir\PEStudio"

# DIE (Detect It Easy)
Write-Host "‚Üí Detect It Easy..."
Install-ZipTool -url "https://github.com/horsicq/Detect-It-Easy/releases/latest/download/die_win64_portable.zip" -destination "$toolsDir\DIE"

# x64dbg
Write-Host "‚Üí x64dbg..."
Install-ZipTool -url "https://github.com/x64dbg/x64dbg/releases/latest/download/snapshot_2024-04-15_00-00.zip" -destination "$toolsDir\x64dbg"

# Volatility 3
Write-Host "‚Üí Volatility 3..."
git clone https://github.com/volatilityfoundation/volatility3 "$toolsDir\Volatility3"

# Wireshark
Write-Host "‚Üí Wireshark..."
Download-Installer -url "https://1.na.dl.wireshark.org/win64/Wireshark-win64-4.2.3.exe" -filename "Wireshark.exe"

# Ghidra
Write-Host "‚Üí Ghidra..."
Install-ZipTool -url "https://ghidra-sre.org/ghidra_10.4_PUBLIC_20231010.zip" -destination "$toolsDir\Ghidra"

# IDA Free
Write-Host "‚Üí IDA Free (requiere instalaci√≥n manual)..."
Start-Process "https://hex-rays.com/ida-free/" # Abre en navegador

# Regshot
Write-Host "‚Üí Regshot..."
Install-ZipTool -url "https://sourceforge.net/projects/regshot/files/regshot/1.9.1/regshot-x64-ansi-1.9.1.zip/download" -destination "$toolsDir\Regshot"

# ApateDNS
Write-Host "‚Üí ApateDNS..."
Install-ZipTool -url "https://zeltser.com/tools/apatedns/apatedns.zip" -destination "$toolsDir\ApateDNS"

# FakeNet-NG
Write-Host "‚Üí FakeNet-NG..."
git clone https://github.com/mandiant/flare-fakenet-ng "$toolsDir\FakeNet-NG"

# Crear accesos directos
Write-Host "`n‚Üí Creando accesos directos..."
$desktop = [Environment]::GetFolderPath("Desktop")
$tools = Get-ChildItem -Path $toolsDir -Recurse -Include *.exe | Where-Object { $_.FullName -notlike "*x64dbg\release*" }

foreach ($tool in $tools) {
    $link = "$desktop\$($tool.BaseName).lnk"
    $wshell = New-Object -ComObject WScript.Shell
    $shortcut = $wshell.CreateShortcut($link)
    $shortcut.TargetPath = $tool.FullName
    $shortcut.Save()
}

Write-Host "`n‚úÖ Instalaci√≥n completada. Todas las herramientas est√°n en: $toolsDir"
```

### üß™ Herramientas que instala:

- Herramientas est√°ticas: PEStudio, DIE, Ghidra, IDA Free (abre el enlace)
- Herramientas din√°micas: Sysinternals Suite (ProcMon, ProcExp, Autoruns‚Ä¶), Wireshark, Regshot, ApateDNS, FakeNet-NG
- Herramientas de memoria: Volatility 3
- Herramientas de depuraci√≥n: x64dbg
- Accesos directos en el escritorio
