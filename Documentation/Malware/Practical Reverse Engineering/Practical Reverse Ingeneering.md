[Practical Reverse Engineering](https://ftp.idu.ac.id/wp-content/uploads/ebook/tdg/MILITARY%20REFERENCE%20AND%20REVERSE%20ENGINEERING/Practical%20reverse%20engineering_%20x86,%20x64,%20ARM,%20Windows%20Kernel,%20reversing%20tools,%20and%20obfuscation%20(%20PDFDrive%20).pdf)


## 🧠 ¿Qué es x86?
Es una arquitectura de procesadores creada por Intel. Lo que define cómo el procesador entiende y ejecuta instrucciones.
- x86 suele referirse a los procesadores de 32 bits.
- Se llama así por el procesador Intel 8086, que fue el primero de esa familia.
- Usa un formato llamado little-endian, donde el byte menos significativo se guarda primero.

## 🔌 Modos de funcionamiento del procesador
Los procesadores x86 pueden trabajar en dos modos principales:  
🔹 Modo real (real mode)
  - Es el modo más simple y antiguo (como en los años 80).
  - Solo permite usar 16 bits.
  - No tiene protección de memoria ni multitarea.
  - Es el modo que usa el procesador al encenderse, antes de que arranque el sistema operativo.

🔹 Modo protegido (protected mode)
  - Es el modo moderno en el que trabajan los sistemas operativos actuales.
  - Permite usar:
    - Memoria virtual.
    - Paginación (manejo eficiente de la memoria).
    - Protección entre procesos
  - Se utiliza cuando ya ha arrancado el sistema operativo (como Windows o Linux).

## 🔒 Separación de privilegios (Ring levels)
Para evitar que programas normales dañen el sistema, el procesador divide las tareas por niveles de privilegio llamados "anillos":

| Anillo |	Privilegio |	Uso común |
| -- | -- | -- |
| Ring 0	 | Máximo	 | Núcleo del sistema (kernel) |
| Ring 1	 | Medio	 | (casi no se usa) |
| Ring 2	 | Medio	 | (casi no se usa) |
| Ring 3	 | Mínimo	 | Aplicaciones de usuario |

- Ring 0 puede hacer todo: cambiar configuraciones, acceder a hardware, etc.
- Ring 3 es donde se ejecutan tus aplicaciones (navegador, juegos...). Tiene acceso limitado para proteger al sistema.

📌 Así, si una app en Ring 3 se bloquea, no arruina todo el sistema porque no tiene acceso total.

## 📦 ¿Y qué hay del x64 o x86-64?
Es la versión moderna de x86, pero para 64 bits. Permite más memoria y mejor rendimiento, pero mantiene compatibilidad con el estilo de x86.


## Conjunto de Registros y Tipos de Datos
Cuando opera en modo protegido, la arquitectura x86 dispone de ocho registros de propósito general de 32 bits (GPRs):  

EAX, EBX, ECX, EDX, EDI, ESI, EBP, y ESP.

Algunos de ellos pueden dividirse en registros de 8 y 16 bits.  
El puntero de instrucciones se guarda en el registro EIP.  

| REGISTER | PURPOSE |
| -- | -- |
| ECX  | Counter in loops |
| ESI  | Source in string/memory operations |
| EIP  | The instruction pointer  |
| EDI  | Destination in string/memory operations |
| EBP  | Base frame pointer |
| ESP  | Stack pointer |


### Los tipos de datos comunes son:
- Byte: 8 bits. Ejemplos: AL, BL, CL
- Palabra (Word): 16 bits. Ejemplos: AX, BX, CX
- Doble palabra (Double word): 32 bits. Ejemplos: EAX, EBX, ECX
- Cuádruple palabra (Quad word): 64 bits. Aunque x86 no tiene registros GPRs de 64 bits, puede combinar dos registros (usualmente EDX:EAX) y tratarlos como un valor de 64 bits.

Por ejemplo, la instrucción RDTSC escribe un valor de 64 bits en EDX:EAX.


El registro **EFLAGS (32 bits)** se usa para guardar el estado de las operaciones aritméticas y otros estados de ejecución (como el trap flag).

Por ejemplo, si una operación add da como resultado **cero, el flag ZF** (Zero Flag) se pone en **1.**
Los flags en **EFLAGS** se usan principalmente para realizar **saltos condicionales** (if, while, etc.).
